<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard - MediHome</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/dashboard.css') }}"
    />
  </head>
  <body>
    <!-- Header -->
    <header>
      <div class="container">
        <div class="header-container">
          <div class="logo">
            <img
              src="{{ url_for('static', filename='images/logo.png') }}"
              alt="MediHome Logo"
              class="logo-img"
              style="height: 50px; width: auto; margin-right: 10px"
            />
            <span>MediHome</span>
          </div>
          <nav>
            <ul class="nav-links" id="navLinks">
              <li><a href="{{ url_for('index') }}">Home</a></li>
              <li><a href="{{ url_for('medicines') }}">Medicine</a></li>
              <li><a href="{{ url_for('about') }}">About</a></li>
              <li><a href="{{ url_for('contact') }}">Contact</a></li>
              <li><a href="{{ url_for('services') }}">Services</a></li>
            </ul>
          </nav>
          <div class="header-actions">
            <div class="cart-icon">
              <a
                href="{{ url_for('cart') }}"
                style="color: inherit; text-decoration: none"
              >
                <i class="fas fa-shopping-cart"></i>
                <span class="cart-count">{{ cart_count }}</span>
              </a>
            </div>
            <div class="theme-toggle" id="themeToggle">
              <i class="fas fa-moon"></i>
            </div>
            {% if user %}
            <div class="user-dropdown">
              <img
                src="{{ user.image or url_for('static', filename='images/defaultUser.png') }}"
                alt="User Profile"
                style="width: 40px; height: 40px; border-radius: 50%"
                class="user-profile"
                id="userProfile"
              />
              <div class="dropdown-menu" id="dropdownMenu">
                <a href="{{ url_for('dashboard') }}">Profile</a>
                <a href="{{ url_for('logout') }}">Logout</a>
              </div>
            </div>
            {% else %}
            <div class="user-dropdown">
              <img
                src="{{ user.image or url_for('static', filename='images/defaultUser.png') }}"
                alt="User Profile"
                class="user-profile"
                id="userProfile"
              />
              <div class="dropdown-menu" id="dropdownMenu">
                {% if user %}
                <a href="{{ url_for('dashboard') }}">Profile</a>
                <a href="{{ url_for('logout') }}">Logout</a>
                {% else %}
                <a href="{{ url_for('login') }}">Login</a>
                <a href="{{ url_for('signup') }}">Signup</a>
                {% endif %}
              </div>
            </div>

            {% endif %}
          </div>
          <div class="mobile-menu-toggle" id="mobileMenuToggle">
            <i class="fas fa-bars"></i>
          </div>
        </div>
      </div>
    </header>

    <!-- Dashboard Page Content -->
    <main class="dashboard-page">
      <div class="container">
        <div class="dashboard-container">
          <!-- Sidebar -->
          <aside class="sidebar">
            <div class="user-profile-section">
              <div class="profile-image-container">
                <img
                  src="{{ user.image or 'https://picsum.photos/seed/user123/100/100.jpg' }}"
                  alt="User Profile"
                  class="profile-image"
                />
                <div class="camera-icon">
                  <i class="fas fa-camera"></i>
                </div>
              </div>
              <h3 class="user-name">{{ user.name }}</h3>
              <p class="user-email">{{ user.email }}</p>

              <div class="user-details">
                <p>
                  <i class="fas fa-phone"></i> {{ user.phone or 'Not provided'
                  }}
                </p>
                <p>
                  <i class="fas fa-map-marker-alt"></i> {{ user.address or 'No
                  address provided' }}
                </p>
                <p>
                  <i class="fas fa-calendar-alt"></i> Member Since: {{
                  user.created_at.strftime('%b %Y') if user.created_at else
                  'N/A' }}
                </p>
              </div>

              <button class="update-profile-btn" id="updateProfileBtn">
                Update Profile
              </button>
            </div>
            <div class="sidebar-menu">
              <form
                action="{{ url_for('set_active_tab') }}"
                method="post"
                class="menu-item-form"
              >
                <input type="hidden" name="tab" value="overview" />
                <button
                  type="submit"
                  class="menu-item {% if active_tab == 'overview' or not active_tab %}active{% endif %}"
                  data-tab="overview"
                >
                  <i class="fas fa-tachometer-alt"></i> Overview
                </button>
              </form>
              <form
                action="{{ url_for('set_active_tab') }}"
                method="post"
                class="menu-item-form"
              >
                <input type="hidden" name="tab" value="orders" />
                <button
                  type="submit"
                  class="menu-item {% if active_tab == 'orders' %}active{% endif %}"
                  data-tab="orders"
                >
                  <i class="fas fa-shopping-bag"></i> All Orders
                </button>
              </form>
              <form
                action="{{ url_for('set_active_tab') }}"
                method="post"
                class="menu-item-form"
              >
                <input type="hidden" name="tab" value="prescription" />
                <button
                  type="submit"
                  class="menu-item {% if active_tab == 'prescription' %}active{% endif %}"
                  data-tab="prescription"
                >
                  <i class="fas fa-file-prescription"></i> Upload Prescription
                </button>
              </form>
              <form
                action="{{ url_for('set_active_tab') }}"
                method="post"
                class="menu-item-form"
              >
                <input type="hidden" name="tab" value="invoices" />
                <button
                  type="submit"
                  class="menu-item {% if active_tab == 'invoices' %}active{% endif %}"
                  data-tab="invoices"
                >
                  <i class="fas fa-file-invoice"></i> View Invoices
                </button>
              </form>
              <form
                action="{{ url_for('set_active_tab') }}"
                method="post"
                class="menu-item-form"
              >
                <input type="hidden" name="tab" value="tracking" />
                <button
                  type="submit"
                  class="menu-item {% if active_tab == 'tracking' %}active{% endif %}"
                  data-tab="tracking"
                >
                  <i class="fas fa-map-marker-alt"></i> Order Tracking
                </button>
              </form>
              <form
                action="{{ url_for('set_active_tab') }}"
                method="post"
                class="menu-item-form"
              >
                <input type="hidden" name="tab" value="addresses" />
                <button
                  type="submit"
                  class="menu-item {% if active_tab == 'addresses' %}active{% endif %}"
                  data-tab="addresses"
                >
                  <i class="fas fa-map-marked-alt"></i> Addresses
                </button>
              </form>
              <form
                action="{{ url_for('set_active_tab') }}"
                method="post"
                class="menu-item-form"
              >
                <input type="hidden" name="tab" value="wishlist" />
                <button
                  type="submit"
                  class="menu-item {% if active_tab == 'wishlist' %}active{% endif %}"
                  data-tab="wishlist"
                >
                  <i class="fas fa-heart"></i> Wishlist
                </button>
              </form>
              <form
                action="{{ url_for('set_active_tab') }}"
                method="post"
                class="menu-item-form"
              >
                <input type="hidden" name="tab" value="support" />
                <button
                  type="submit"
                  class="menu-item {% if active_tab == 'support' %}active{% endif %}"
                  data-tab="support"
                >
                  <i class="fas fa-headset"></i> Customer Support
                </button>
              </form>
              <form
                action="{{ url_for('set_active_tab') }}"
                method="post"
                class="menu-item-form"
              >
                <input type="hidden" name="tab" value="settings" />
                <button
                  type="submit"
                  class="menu-item {% if active_tab == 'settings' %}active{% endif %}"
                  data-tab="settings"
                >
                  <i class="fas fa-cog"></i> Account Settings
                </button>
              </form>
            </div>
          </aside>
          <!-- Main Content -->
          <main class="main-content">
            <div class="dashboard-header">
              <div class="welcome-banner">
                <h1 class="welcome-title">Welcome back, {{ user.name }}!</h1>
                <p class="welcome-subtitle">
                  Here's what's happening with your MediHome account today.
                </p>
              </div>
            </div>
            <!-- Overview Tab -->
            <div
              class="tab-content {% if active_tab == 'overview' or not active_tab %}active{% endif %}"
              id="overview"
            >
              <h2 class="section-title">Overview</h2>
              <div class="stats-cards">
                <div class="stat-card">
                  <div class="stat-icon">
                    <i class="fas fa-shopping-cart"></i>
                  </div>
                  <div class="stat-number">{{ total_orders }}</div>
                  <div class="stat-label">Total Orders</div>
                </div>
                <div class="stat-card">
                  <div class="stat-icon">
                    <i class="fas fa-heart"></i>
                  </div>
                  <div class="stat-number">{{ wishlist_count }}</div>
                  <div class="stat-label">Wishlist Items</div>
                </div>
                <div class="stat-card">
                  <div class="stat-icon">
                    <i class="fas fa-file-prescription"></i>
                  </div>
                  <div class="stat-number">{{ prescriptions|length }}</div>
                  <div class="stat-label">Prescriptions</div>
                </div>
                <div class="stat-card">
                  <div class="stat-icon">
                    <i class="fas fa-wallet"></i>
                  </div>
                  <div class="stat-number">
                    ৳{{ "%.2f"|format(total_spent|float) }}
                  </div>
                  <div class="stat-label">Total Spent</div>
                </div>
              </div>
              <h3 class="section-title">Quick Actions</h3>
              <div class="quick-actions">
                <!-- New Order -->
                <a href="{{ url_for('medicines') }}" class="action-card">
                  <div class="action-icon">
                    <i class="fas fa-plus-circle"></i>
                  </div>
                  <div class="action-name">New Order</div>
                </a>

                <!-- Upload Rx -->
                <form
                  action="{{ url_for('set_active_tab') }}"
                  method="post"
                  class="action-card-form"
                >
                  <input type="hidden" name="tab" value="prescription" />
                  <button type="submit" class="action-card">
                    <div class="action-icon">
                      <i class="fas fa-file-prescription"></i>
                    </div>
                    <div class="action-name">Upload Prescription</div>
                  </button>
                </form>

                <!-- Reorder -->
                <form
                  action="{{ url_for('reorder_most_recent') }}"
                  method="post"
                  class="action-card-form"
                >
                  <button type="submit" class="action-card">
                    <div class="action-icon">
                      <i class="fas fa-redo"></i>
                    </div>
                    <div class="action-name">Reorder</div>
                  </button>
                </form>

                <!-- Support -->
                <a href="{{ url_for('contact') }}" class="action-card">
                  <div class="action-icon">
                    <i class="fas fa-headset"></i>
                  </div>
                  <div class="action-name">Support</div>
                </a>

                <!-- Give Review -->
                <form
                  action="{{ url_for('submit_review') }}"
                  method="post"
                  class="action-card-form"
                >
                  <input type="hidden" name="tab" value="review" />
                  <button type="submit" class="action-card">
                    <div class="action-icon">
                      <i class="fas fa-star"></i>
                    </div>
                    <div class="action-name">Give Review</div>
                  </button>
                </form>
              </div>
              <h3 class="section-title">Recent Orders</h3>
              <table class="orders-table">
                <thead>
                  <tr>
                    <th>Order ID</th>
                    <th>Date</th>
                    <th>Total</th>
                    <th>Status</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody>
                  {% for order in recent_orders %}
                  <tr>
                    <td class="order-id">#ORD-{{ order.id }}</td>
                    <td>{{ order.created_at.strftime('%d %b %Y') }}</td>
                    <td>৳{{ "%.2f"|format(order.price|float) }}</td>
                    <td>
                      <span class="order-status status-{{ order.status|lower }}"
                        >{{ order.status }}</span
                      >
                    </td>
                    <td>
                      <div class="order-actions">
                        <a
                          href="{{ url_for('invoice', order_ids=order.id) }}"
                          class="order-btn"
                          >View</a
                        >
                        <form
                          action="{{ url_for('reorder_order', order_id=order.id) }}"
                          method="post"
                          style="display: inline"
                        >
                          <button type="submit" class="order-btn">
                            Reorder
                          </button>
                        </form>
                      </div>
                    </td>
                  </tr>
                  {% endfor %}
                </tbody>
              </table>
              <form
                action="{{ url_for('set_active_tab') }}"
                method="post"
                style="display: inline"
              >
                <input type="hidden" name="tab" value="orders" />
                <button type="submit" class="view-all-btn">
                  View All Orders
                </button>
              </form>
            </div>
            <!-- All Orders Tab -->
            <div
              class="tab-content {% if active_tab == 'orders' %}active{% endif %}"
              id="orders"
            >
              <h2 class="section-title">All Orders</h2>
              <table class="orders-table">
                <thead>
                  <tr>
                    <th>Order ID</th>
                    <th>Date</th>
                    <th>Items</th>
                    <th>Total</th>
                    <th>Status</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody>
                  {% for order in all_orders %}
                  <tr>
                    <td class="order-id">#ORD-{{ order.id }}</td>
                    <td>{{ order.created_at.strftime('%d %b %Y') }}</td>
                    <td>{{ order.quantity }} items</td>
                    <td>৳{{ "%.2f"|format(order.price|float) }}</td>
                    <td>
                      <span class="order-status status-{{ order.status|lower }}"
                        >{{ order.status }}</span
                      >
                    </td>
                    <td>
                      <div class="order-actions">
                        <a
                          href="{{ url_for('invoice', order_ids=order.id) }}"
                          class="order-btn"
                          >View</a
                        >
                        <a
                          href="{{ url_for('invoice', order_ids=order.id) }}"
                          class="order-btn"
                          >Invoice</a
                        >
                        <form
                          action="{{ url_for('reorder_order', order_id=order.id) }}"
                          method="post"
                          style="display: inline"
                        >
                          <button type="submit" class="order-btn">
                            Reorder
                          </button>
                        </form>
                      </div>
                    </td>
                  </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>
            <!-- Upload Prescription Tab -->
            <div
              class="tab-content {% if active_tab == 'prescription' %}active{% endif %}"
              id="prescription"
            >
              <h2 class="section-title">Upload Prescription</h2>
              <div class="upload-container" id="uploadContainer">
                <div class="upload-icon">
                  <i class="fas fa-cloud-upload-alt"></i>
                </div>
                <p class="upload-text">
                  Drag & drop your prescription here or click to browse
                </p>
                <button class="upload-btn" id="uploadBtn">Choose File</button>
                <input
                  type="file"
                  class="file-input"
                  id="fileInput"
                  accept="image/*,.pdf"
                />
              </div>
              <!-- Prescription Upload Form -->
              <div
                class="prescription-form"
                id="prescriptionForm"
                style="display: none; margin-top: 20px"
              >
                <form
                  action="{{ url_for('upload_prescription') }}"
                  method="post"
                  enctype="multipart/form-data"
                >
                  <div class="form-group">
                    <label for="patientName">Patient Name</label>
                    <input
                      type="text"
                      id="patientName"
                      name="patientName"
                      class="form-control"
                      required
                    />
                  </div>
                  <div class="form-group">
                    <label for="patientAge">Patient Age</label>
                    <input
                      type="number"
                      id="patientAge"
                      name="patientAge"
                      class="form-control"
                    />
                  </div>
                  <div class="form-group">
                    <label for="patientPhone">Patient Phone</label>
                    <input
                      type="tel"
                      id="patientPhone"
                      name="patientPhone"
                      class="form-control"
                    />
                  </div>
                  <div class="form-group">
                    <label for="patientEmail">Patient Email</label>
                    <input
                      type="email"
                      id="patientEmail"
                      name="patientEmail"
                      class="form-control"
                    />
                  </div>
                  <div class="form-group">
                    <label for="patientAddress">Patient Address</label>
                    <textarea
                      id="patientAddress"
                      name="patientAddress"
                      class="form-control"
                      rows="3"
                    ></textarea>
                  </div>
                  <div class="form-group">
                    <label for="specialInstructions"
                      >Special Instructions</label
                    >
                    <textarea
                      id="specialInstructions"
                      name="specialInstructions"
                      class="form-control"
                      rows="3"
                    ></textarea>
                  </div>
                  <div class="form-group">
                    <label for="prescriptionFile">Prescription File</label>
                    <input
                      type="file"
                      id="prescriptionFile"
                      name="prescriptionFile"
                      class="form-control"
                      accept="image/*,.pdf"
                      required
                    />
                  </div>
                  <div style="display: flex; gap: 10px">
                    <button type="submit" class="form-submit">
                      Upload Prescription
                    </button>
                    <button
                      type="button"
                      class="form-submit"
                      id="cancelPrescriptionBtn"
                      style="background-color: #6c757d"
                    >
                      Cancel
                    </button>
                  </div>
                </form>
              </div>
              <div class="uploaded-files" id="uploadedFiles">
                {% for prescription in prescriptions %}
                <div class="file-item">
                  <div class="file-info">
                    <i
                      class="fas fa-file-{% if 'pdf' in prescription.image_path %}pdf{% else %}image{% endif %} file-icon"
                    ></i>
                    <span class="file-name"
                      >{{ prescription.image_path.split('/')[-1] }}</span
                    >
                  </div>
                  <span
                    class="file-status status-{{ prescription.status|lower }}"
                    >{{ prescription.status }}</span
                  >
                  <div class="file-actions">
                    <button class="file-btn"><i class="fas fa-eye"></i></button>
                    <button class="file-btn">
                      <i class="fas fa-trash"></i>
                    </button>
                    {% if prescription.status == 'Pending' %}
                    <form
                      action="{{ url_for('create_order_from_prescription') }}"
                      method="post"
                      style="display: inline"
                    >
                      <input
                        type="hidden"
                        name="prescriptionId"
                        value="{{ prescription.id }}"
                      />
                      <input
                        type="hidden"
                        name="patientName"
                        value="{{ prescription.patient_name }}"
                      />
                      <input
                        type="hidden"
                        name="patientPhone"
                        value="{{ prescription.patient_phone }}"
                      />
                      <input
                        type="hidden"
                        name="patientEmail"
                        value="{{ prescription.patient_email }}"
                      />
                      <input
                        type="hidden"
                        name="patientAddress"
                        value="{{ prescription.patient_address }}"
                      />
                      <input
                        type="hidden"
                        name="specialInstructions"
                        value="{{ prescription.special_instructions }}"
                      />
                      <button type="submit" class="file-btn">
                        Create Order
                      </button>
                    </form>
                    {% endif %}
                  </div>
                </div>
                {% endfor %}
              </div>
            </div>
            <!-- View Invoices Tab -->
            <div
              class="tab-content {% if active_tab == 'invoices' %}active{% endif %}"
              id="invoices"
            >
              <h2 class="section-title">View Invoices</h2>
              <div class="invoices-grid">
                {% for order in all_orders %}
                <div class="invoice-card">
                  <div class="invoice-header">
                    <div class="invoice-number">#INV-{{ order.id }}</div>
                    <div class="invoice-date">
                      {{ order.created_at.strftime('%d %b %Y') }}
                    </div>
                  </div>
                  <div class="invoice-details">
                    <div class="invoice-row">
                      <span>Order ID:</span>
                      <span>#ORD-{{ order.id }}</span>
                    </div>
                    <div class="invoice-row">
                      <span>Payment Method:</span>
                      <span>{{ order.payment_method }}</span>
                    </div>
                    <div class="invoice-row">
                      <span>Items:</span>
                      <span>{{ order.quantity }} items</span>
                    </div>
                    <div class="invoice-row">
                      <span>Delivery:</span>
                      <span>৳0</span>
                    </div>
                    <div class="invoice-row total">
                      <span>Total:</span>
                      <span>৳{{ "%.2f"|format(order.price|float) }}</span>
                    </div>
                  </div>
                  <div class="invoice-actions">
                    <a
                      href="{{ url_for('invoice', order_ids=order.id) }}"
                      class="invoice-btn"
                      >View</a
                    >
                    <a
                      href="{{ url_for('invoice', order_ids=order.id) }}"
                      class="invoice-btn secondary"
                      >Download</a
                    >
                  </div>
                </div>
                {% endfor %}
              </div>
            </div>
            <!-- Order Tracking Tab -->
            <div
              class="tab-content {% if active_tab == 'tracking' %}active{% endif %}"
              id="tracking"
            >
              <h2 class="section-title">Order Tracking</h2>
              <div class="tracking-container">
                <div class="tracking-form">
                  <input
                    type="text"
                    class="tracking-input"
                    placeholder="Enter order ID"
                  />
                  <button class="tracking-btn">Track Order</button>
                </div>
                <div class="tracking-result active" id="trackingResult">
                  {% if recent_orders %}
                  <div class="tracking-header">
                    <div class="tracking-order">
                      #ORD-{{ recent_orders[0].id }}
                    </div>
                    <div
                      class="tracking-status status-{{ recent_orders[0].status|lower }}"
                    >
                      {{ recent_orders[0].status }}
                    </div>
                  </div>
                  <div class="tracking-timeline">
                    <div class="timeline-item completed">
                      <div class="timeline-date">
                        {{ recent_orders[0].created_at.strftime('%d %b %Y, %I:%M
                        %p') }}
                      </div>
                      <div class="timeline-text">Order Placed</div>
                    </div>
                    <div class="timeline-item completed">
                      <div class="timeline-date">
                        {{ recent_orders[0].created_at.strftime('%d %b %Y, %I:%M
                        %p') }}
                      </div>
                      <div class="timeline-text">Order Confirmed</div>
                    </div>
                    <div
                      class="timeline-item {% if recent_orders[0].status in ['Processing', 'Out for Delivery', 'Delivered'] %}completed{% endif %}"
                    >
                      <div class="timeline-date">
                        {{ recent_orders[0].created_at.strftime('%d %b %Y, %I:%M
                        %p') }}
                      </div>
                      <div class="timeline-text">Order Processed</div>
                    </div>
                    <div
                      class="timeline-item {% if recent_orders[0].status in ['Out for Delivery', 'Delivered'] %}completed{% elif recent_orders[0].status == 'Processing' %}active{% endif %}"
                    >
                      <div class="timeline-date">
                        {{ recent_orders[0].created_at.strftime('%d %b %Y') }}
                      </div>
                      <div class="timeline-text">Out for Delivery</div>
                    </div>
                    <div
                      class="timeline-item {% if recent_orders[0].status == 'Delivered' %}completed{% endif %}"
                    >
                      <div class="timeline-date">
                        Expected: {{ recent_orders[0].estimated_delivery }}
                      </div>
                      <div class="timeline-text">Delivered</div>
                    </div>
                  </div>
                  {% else %}
                  <p>No orders found</p>
                  {% endif %}
                </div>
              </div>
            </div>
            <!-- Addresses Tab -->
            <div
              class="tab-content {% if active_tab == 'addresses' %}active{% endif %}"
              id="addresses"
            >
              <h2 class="section-title">Manage Addresses</h2>
              <p style="margin-bottom: 20px">
                Manage your delivery addresses for faster checkout.
              </p>
              <button
                class="form-submit"
                style="width: auto; margin-bottom: 20px"
              >
                Add New Address
              </button>
              <div
                style="
                  background-color: var(--light-bg);
                  border-radius: 10px;
                  padding: 20px;
                  margin-bottom: 15px;
                "
              >
                <div
                  style="
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 10px;
                  "
                >
                  <h3 style="font-size: 16px; font-weight: 600">Home</h3>
                  <span
                    style="
                      background-color: var(--primary-color);
                      color: var(--white);
                      padding: 3px 8px;
                      border-radius: 10px;
                      font-size: 12px;
                    "
                    >Default</span
                  >
                </div>
                <p
                  style="
                    font-size: 14px;
                    color: var(--text-color);
                    margin-bottom: 10px;
                  "
                >
                  {{ user.address or 'No address provided' }}
                </p>
                <div style="display: flex; gap: 10px">
                  <button class="order-btn">Edit</button>
                  <button class="order-btn">Remove</button>
                </div>
              </div>
            </div>
            <!-- Wishlist Tab -->
            <div
              class="tab-content {% if active_tab == 'wishlist' %}active{% endif %}"
              id="wishlist"
            >
              <h2 class="section-title">My Wishlist</h2>
              <div class="recommendation-grid">
                <!-- Placeholder for wishlist items -->
                <div class="empty-wishlist">
                  <i
                    class="fas fa-heart"
                    style="font-size: 48px; color: #ccc; margin-bottom: 15px"
                  ></i>
                  <p>Your wishlist is empty</p>
                  <a href="{{ url_for('medicines') }}" class="btn"
                    >Browse Medicines</a
                  >
                </div>
              </div>
            </div>
            <!-- Customer Support Tab -->
            <div
              class="tab-content {% if active_tab == 'support' %}active{% endif %}"
              id="support"
            >
              <h2 class="section-title">Customer Support</h2>
              <p style="margin-bottom: 20px">
                Our customer support team is here to help you with any questions
                or issues.
              </p>
              <div
                style="
                  display: grid;
                  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                  gap: 20px;
                  margin-bottom: 30px;
                "
              >
                <div
                  style="
                    background-color: var(--light-bg);
                    border-radius: 10px;
                    padding: 20px;
                    text-align: center;
                  "
                >
                  <div
                    style="
                      font-size: 30px;
                      color: var(--primary-color);
                      margin-bottom: 15px;
                    "
                  >
                    <i class="fas fa-phone-alt"></i>
                  </div>
                  <h3
                    style="
                      font-size: 16px;
                      font-weight: 600;
                      margin-bottom: 10px;
                    "
                  >
                    Call Us
                  </h3>
                  <p
                    style="
                      font-size: 14px;
                      color: var(--text-color);
                      margin-bottom: 15px;
                    "
                  >
                    +880 1234 567890
                  </p>
                  <button class="order-btn">Call Now</button>
                </div>
                <div
                  style="
                    background-color: var(--light-bg);
                    border-radius: 10px;
                    padding: 20px;
                    text-align: center;
                  "
                >
                  <div
                    style="
                      font-size: 30px;
                      color: var(--primary-color);
                      margin-bottom: 15px;
                    "
                  >
                    <i class="fas fa-envelope"></i>
                  </div>
                  <h3
                    style="
                      font-size: 16px;
                      font-weight: 600;
                      margin-bottom: 10px;
                    "
                  >
                    Email Us
                  </h3>
                  <p
                    style="
                      font-size: 14px;
                      color: var(--text-color);
                      margin-bottom: 15px;
                    "
                  >
                    support@medihome.com
                  </p>
                  <button class="order-btn">Send Email</button>
                </div>
                <div
                  style="
                    background-color: var(--light-bg);
                    border-radius: 10px;
                    padding: 20px;
                    text-align: center;
                  "
                >
                  <div
                    style="
                      font-size: 30px;
                      color: var(--primary-color);
                      margin-bottom: 15px;
                    "
                  >
                    <i class="fas fa-comments"></i>
                  </div>
                  <h3
                    style="
                      font-size: 16px;
                      font-weight: 600;
                      margin-bottom: 10px;
                    "
                  >
                    Live Chat
                  </h3>
                  <p
                    style="
                      font-size: 14px;
                      color: var(--text-color);
                      margin-bottom: 15px;
                    "
                  >
                    Chat with our support team
                  </p>
                  <button class="order-btn">Start Chat</button>
                </div>
                <div
                  style="
                    background-color: var(--light-bg);
                    border-radius: 10px;
                    padding: 20px;
                    text-align: center;
                  "
                >
                  <div
                    style="
                      font-size: 30px;
                      color: var(--primary-color);
                      margin-bottom: 15px;
                    "
                  >
                    <i class="fas fa-question-circle"></i>
                  </div>
                  <h3
                    style="
                      font-size: 16px;
                      font-weight: 600;
                      margin-bottom: 10px;
                    "
                  >
                    FAQ
                  </h3>
                  <p
                    style="
                      font-size: 14px;
                      color: var(--text-color);
                      margin-bottom: 15px;
                    "
                  >
                    Find answers to common questions
                  </p>
                  <button class="order-btn">View FAQ</button>
                </div>
              </div>
            </div>
            <!-- Account Settings Tab -->
            <div
              class="tab-content {% if active_tab == 'settings' %}active{% endif %}"
              id="settings"
            >
              <h2 class="section-title">Account Settings</h2>
              <div
                style="
                  background-color: var(--light-bg);
                  border-radius: 10px;
                  padding: 20px;
                  margin-bottom: 20px;
                "
              >
                <h3
                  style="font-size: 16px; font-weight: 600; margin-bottom: 15px"
                >
                  Change Password
                </h3>
                <form action="{{ url_for('change_password') }}" method="post">
                  <div class="form-group">
                    <label for="currentPassword">Current Password</label>
                    <input
                      type="password"
                      id="currentPassword"
                      name="currentPassword"
                      class="form-control"
                      placeholder="Enter current password"
                      required
                    />
                  </div>
                  <div class="form-group">
                    <label for="newPassword">New Password</label>
                    <input
                      type="password"
                      id="newPassword"
                      name="newPassword"
                      class="form-control"
                      placeholder="Enter new password"
                      required
                    />
                  </div>
                  <div class="form-group">
                    <label for="confirmPassword">Confirm New Password</label>
                    <input
                      type="password"
                      id="confirmPassword"
                      name="confirmPassword"
                      class="form-control"
                      placeholder="Confirm new password"
                      required
                    />
                  </div>
                  <button type="submit" class="form-submit" style="width: auto">
                    Change Password
                  </button>
                </form>
              </div>
            </div>
          </main>
        </div>
      </div>
    </main>
    <!-- Footer -->
    <footer>
      <div class="container">
        <div class="footer-container">
          <div class="footer-column">
            <h3>About MediHome</h3>
            <p>
              Your trusted online pharmacy in Bangladesh, providing genuine
              medicines and healthcare products at your doorstep.
            </p>
            <div class="social-icons">
              <a href="#" class="social-icon facebook"
                ><i class="fab fa-facebook-f"></i
              ></a>
              <a href="#" class="social-icon youtube"
                ><i class="fab fa-youtube"></i
              ></a>
              <a href="#" class="social-icon tiktok"
                ><i class="fab fa-tiktok"></i
              ></a>
              <a href="#" class="social-icon github"
                ><i class="fab fa-github"></i
              ></a>
              <a href="#" class="social-icon linkedin"
                ><i class="fab fa-linkedin-in"></i
              ></a>
              <a href="#" class="social-icon instagram"
                ><i class="fab fa-instagram"></i
              ></a>
            </div>
          </div>
          <div class="footer-column">
            <h3>Newsletter</h3>
            <p>
              Subscribe to our newsletter for the latest updates and exclusive
              offers.
            </p>
            <form
              class="newsletter-form"
              action="{{ url_for('subscribe') }}"
              method="post"
            >
              <input
                type="email"
                class="newsletter-input"
                placeholder="Your email address"
                name="email"
                required
              />
              <button type="submit" class="newsletter-button">Subscribe</button>
            </form>
          </div>
          <div class="footer-column">
            <h3>Services</h3>
            <ul>
              <li>
                <a href="{{ url_for('medicine_delivery') }}"
                  >Medicine Delivery</a
                >
              </li>
              <li>
                <a href="{{ url_for('health_consultation') }}"
                  >Health Consultation</a
                >
              </li>
              <li>
                <a href="{{ url_for('prescription_upload') }}"
                  >Prescription Upload</a
                >
              </li>
              <li><a href="{{ url_for('lab_tests') }}">Lab Tests</a></li>
              <li>
                <a href="{{ url_for('healthcare_products') }}"
                  >Healthcare Products</a
                >
              </li>
            </ul>
          </div>
          <div class="footer-column">
            <h3>Quick Links</h3>
            <ul>
              <li><a href="{{ url_for('index') }}">Home</a></li>
              <li><a href="{{ url_for('about') }}">About Us</a></li>
              <li><a href="{{ url_for('contact') }}">Contact Us</a></li>
              <li><a href="{{ url_for('terms') }}">Terms & Conditions</a></li>
              <li><a href="{{ url_for('privacy') }}">Privacy Policy</a></li>
            </ul>
          </div>
          <div class="footer-column">
            <h3>Categories</h3>
            <ul>
              <li>
                <a href="{{ url_for('medicines', category='Pain Relief') }}"
                  >Pain Relief</a
                >
              </li>
              <li>
                <a href="{{ url_for('medicines', category='Vitamins') }}"
                  >Vitamins</a
                >
              </li>
              <li>
                <a href="{{ url_for('medicines', category='Cough & Cold') }}"
                  >Cough & Cold</a
                >
              </li>
              <li>
                <a href="{{ url_for('medicines', category='Diabetes Care') }}"
                  >Diabetes Care</a
                >
              </li>
              <li>
                <a href="{{ url_for('medicines', category='Baby Care') }}"
                  >Baby Care</a
                >
              </li>
            </ul>
          </div>
          <div class="footer-column">
            <h3>Support</h3>
            <ul>
              <li><a href="{{ url_for('contact') }}">FAQ</a></li>
              <li>
                <a href="{{ url_for('shipping_policy') }}">Shipping Policy</a>
              </li>
              <li><a href="{{ url_for('returns') }}">Returns & Refunds</a></li>
              <li><a href="{{ url_for('track_order') }}">Track Order</a></li>
              <li><a href="{{ url_for('contact') }}">Contact Support</a></li>
            </ul>
          </div>
        </div>
        <div class="copyright">
          <p>
            &copy; 2023 MediHome. All Rights Reserved. | Created by Naimul Islam
            | Dhaka, Bangladesh
          </p>
        </div>
      </div>
    </footer>
    <!-- Update Profile Modal -->
    <div class="modal" id="updateProfileModal">
      <div class="modal-content">
        <span class="modal-close" id="updateProfileModalClose">&times;</span>
        <h2
          style="
            margin-bottom: 20px;
            text-align: center;
            color: var(--primary-color);
          "
        >
          Update Profile
        </h2>
        <form
          action="{{ url_for('update_profile') }}"
          method="post"
          enctype="multipart/form-data"
        >
          <div class="form-group">
            <label for="profileName">Full Name</label>
            <input
              type="text"
              id="profileName"
              name="profileName"
              class="form-control"
              value="{{ user.name }}"
              required
            />
          </div>
          <div class="form-group">
            <label for="profileEmail">Email</label>
            <input
              type="email"
              id="profileEmail"
              name="profileEmail"
              class="form-control"
              value="{{ user.email }}"
              required
            />
          </div>
          <div class="form-group">
            <label for="profilePhone">Phone</label>
            <input
              type="tel"
              id="profilePhone"
              name="profilePhone"
              class="form-control"
              value="{{ user.phone }}"
              required
            />
          </div>
          <div class="form-group">
            <label for="profileAddress">Address</label>
            <textarea
              id="profileAddress"
              name="profileAddress"
              class="form-control"
              rows="3"
              required
            >
{{ user.address or '' }}</textarea
            >
          </div>
          <div class="form-group">
            <label for="profileImage">Profile Image</label>
            <input
              type="file"
              id="profileImage"
              name="profileImage"
              class="form-control"
              accept="image/*"
            />
          </div>
          <div style="display: flex; gap: 10px">
            <button type="submit" class="form-submit">Update Profile</button>
            <button
              type="button"
              class="form-submit"
              id="cancelUpdateProfileBtn"
              style="background-color: #6c757d"
            >
              Cancel
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Flash messages -->
    {% with messages = get_flashed_messages(with_categories=true) %} {% if
    messages %}
    <div class="flash-messages">
      {% for category, message in messages %}
      <div class="alert alert-{{ category }}">{{ message }}</div>
      {% endfor %}
    </div>
    {% endif %} {% endwith %}
    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>
    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
  </body>
</html>
